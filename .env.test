# Integration Test Configuration
# This file is used automatically by integration tests and provides default values
#
# CONFIGURATION PRIORITY (highest to lowest):
#   1. Environment variables (e.g., export KISSKI_API_KEY=...)
#   2. .env file (create locally, not committed to git)
#   3. .env.test file (this file - committed, no secrets)
#
# TO ADD SECRETS: Create a .env file with your API keys (it's already in .gitignore)
# Example .env:
#   KISSKI_API_KEY=your_actual_key_here

# =============================================================================
# Test Library Configuration
# =============================================================================

# Public test group: https://www.zotero.org/groups/6297749/test-rag-plugin
TEST_LIBRARY_ID=6297749
TEST_LIBRARY_TYPE=group

# Expected minimum items and chunks (update if test data changes)
EXPECTED_MIN_ITEMS=5
EXPECTED_MIN_CHUNKS=50

# =============================================================================
# Model Configuration for Tests
# =============================================================================

# Use remote-kisski for Python 3.12 (local embeddings + remote KISSKI LLM)
# Alternative: windows-test (requires OpenAI + KISSKI keys), mac-mini-m4-16gb, cpu-only
MODEL_PRESET=remote-kisski

# =============================================================================
# Zotero Configuration
# =============================================================================

# Zotero local API URL (should be running during tests)
ZOTERO_API_URL=http://localhost:23124

# =============================================================================
# API Keys for Remote Services
# =============================================================================

# IMPORTANT: For security, set these in your environment or a local .env file
# DO NOT commit actual API keys to version control

# KISSKI Academic Cloud API key (for remote-kisski preset)
# Get access at: https://kisski.gwdg.de/
# Set this in your environment: export KISSKI_API_KEY=your_key
# Or create a local .env file (not committed)
# KISSKI_API_KEY=your_kisski_api_key

# OpenAI API key (if using remote-openai preset)
# OPENAI_API_KEY=sk-...

# HuggingFace token (for downloading some models)
# HF_TOKEN=your_huggingface_token

# =============================================================================
# Test Execution Configuration
# =============================================================================

# Skip slow tests by default (set to 1 to run all tests)
RUN_SLOW_TESTS=0

# Test timeout in seconds
TEST_TIMEOUT=300

# Backend server URL for API tests (uses separate test server on port 8219)
BACKEND_BASE_URL=http://localhost:8219

# =============================================================================
# Logging for Tests
# =============================================================================

# Log level for integration tests (DEBUG for detailed output)
LOG_LEVEL=DEBUG

# Note: Test server logs are written to logs/test_server.log (hardcoded in conftest.py)

# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================
#
# 1. This file is loaded automatically by conftest.py when running integration tests
# 2. To override values, create a .env file or set environment variables
# 3. Environment variables take precedence: ENV > .env > .env.test
# 4. Never commit API keys - use environment variables for sensitive data
#
# Quick Start:
#   1. Start Zotero with test group synced
#   2. Set KISSKI_API_KEY in environment: export KISSKI_API_KEY=your_key
#   3. Run integration tests: npm run test:integration
#   4. Run api tests: npm run test:api
